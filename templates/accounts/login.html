{% extends "base.html" %}

{% block content %}
    <main>
        <!-- Login Page -->
        <section id="login" class="page">
            <div class="flex items-center justify-center py-20 px-6">
                <div class="w-full max-w-md bg-white p-8 rounded-lg shadow-lg">
                    <div class="text-center mb-8">
                        <h1 class="text-3xl font-serif text-primary">Welcome Back!</h1>
                        <p class="text-text-light">Sign in to your account</p>
                    </div>
                    <form action="{% url 'login' %}" method="POST">
                        {% csrf_token %}
                        <div class="mb-4"><label class="block mb-1">Email Address</label><input type="email" name="email" class="w-full p-3 border rounded-md"></div>
                        <div class="mb-6"><label class="block mb-1">Password</label><input type="password" name="password" class="w-full p-3 border rounded-md"></div>
                        <button type="submit" data-page="dashboard" class="block text-center bg-primary text-white w-full py-3 rounded-md font-semibold hover:bg-opacity-90 transition">Login</button>
                    </form>
                    <div class="text-center mt-6">
                        <a href="{% url 'forgotPassword' %}" class="text-sm text-primary hover:underline">Forgot Password?</a>
                        <p class="text-sm text-text-light mt-2">Don't have an account? <a href="{% url 'register' %}" data-page="register" class="font-semibold text-primary hover:underline">Sign Up</a></p>
                    </div>
                </div>
            </div>
        </section>
    </main>
{% endblock content %}

{% block extra_js %}
    {% if request.GET.command == 'verification' %}
        <script>
            // Ensure this script runs after the main DOMContentLoaded event
            // or place it at the very end of your body tag.
            window.addEventListener('load', function() {
                // The message.tags can be 'success', 'error', 'info', 'warning'
                {% comment %} var messageType = 'success';
                if (messageType === 'warning') {
                    messageType = 'info'; // Map Django's 'warning' to our 'info' style
                } {% endcomment %}
                
                // Capitalize the first letter for a default title
                {% comment %} var title = messageType.charAt(0).toUpperCase() + messageType.slice(1) + '!'; {% endcomment %}

                showMessage('success', 'Success!', 'Thank you for registering!');
                showMessage('info', 'Info!', 'We have send you a verification email to your email address [{{ request.GET.email }}]', 50000);
                showMessage('info', 'Info!', 'Already verified? <a href="{% url 'login' %}" class="font-semibold">Click here to Login</a>', 50000);
            });
        </script>
    {% endif %}
{% endblock extra_js %}